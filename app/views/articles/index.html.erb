<p id="notice"><%= notice %></p>

<h1>Articles</h1>

<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Category</th>
            <th colspan="3"></th>
        </tr>
    </thead>

    <tbody>
        <% @articles.each do |article| %>
        <tr>
            <td><%= article.title %></td>
            <td><%= article.description %></td>
            <td><%= article.category.name %></td>
            <td><%= link_to 'Show', article %></td>
            <td><%= link_to 'Edit', edit_article_path(article) %></td>
            <td><%= link_to 'Destroy', article, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %>
    </tbody>
</table>

<br>

<%= link_to 'New Article', new_article_path %>

<div class="container mt-5">
    <div class="row">
        <% @articles.each do |article| %>
        <div class="col-12 mt-3">
            <div class=" card ">
                <h5 class=" card-header"><%= article.category.name %></h5>
                <div class="card-body">
                    <%#  image_tag article.image.url %>
                    <h5 class="card-title"><%= link_to article.title, article_path(article) %></h5>
                    <p class="card-text"><%= truncate(article.description, length: 100) %></p>
                    <div>
                        <small class="text-success font-small">Created by: <%= article.author.name %> |
                            <%= time_ago_in_words(article.created_at) %> ago |
                            last updated: <%= time_ago_in_words(article.updated_at) %> ago</small>
                    </div>
                    <% if current_user == article.author %>
                    <%= link_to 'Destroy', article, method: :delete, data: { confirm: 'Are you sure?' } %>
                    <% end %>
                </div>
            </div>
        </div>
        <% end %>
    </div>
</div>